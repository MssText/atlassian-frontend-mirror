## API Report File for "@atlaskit/feature-flag-client"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
declare type AnalyticsHandler = (event: ExposureEvent) => void;

declare interface AutomaticAnalyticsHandler {
  sendOperationalEvent(event: ExposureEvent): void;
}

declare type AutomaticExposureHandler = (
  flagKey: string,
  value: string | boolean | object,
  flagExplanation?: FlagShape['explanation'],
) => void;

/**
 * This class contains the base logic for evaluating feature flags.
 */
declare class BasicFlag implements FlagWrapper {
  flagKey: string;
  flag: FlagShape;
  /**
   * @todo The value is only required for backwards compatibility, since
   * the object returned from client.getFlag has always contained this field.
   * This field can be deleted once client.getFlag has been removed from
   * the public API
   */
  value: FlagValue;
  evaluationCount: number;
  trackExposure: InternalTriggeredExposureHandler;
  sendAutomaticExposure: AutomaticExposureHandler;
  _evaluationResult?: EvaluationResult;
  constructor(
    flagKey: string,
    flag: FlagShape,
    trackExposure: InternalTriggeredExposureHandler,
    sendAutomaticExposure: AutomaticExposureHandler,
  );
  private getCachedResultOrCompute;
  private computeWithValidation;
  getBooleanValue(options: {
    default: boolean;
    shouldTrackExposureEvent?: boolean;
    exposureData?: CustomAttributes;
  }): boolean;
  getVariantValue(options: {
    default: string;
    oneOf: string[];
    shouldTrackExposureEvent?: boolean;
    exposureData?: CustomAttributes;
  }): string;
  getJSONValue(): object;
  getRawValue(options: {
    default: FlagValue;
    shouldTrackExposureEvent?: boolean;
    exposureData?: CustomAttributes;
  }): FlagValue;
}

declare type CustomAttributes = {
  [attributeName: string]: string | number | boolean | object;
};

declare type ErrorKind = 'WRONG_TYPE' | 'FLAG_NOT_FOUND' | 'VALIDATION_ERROR';

declare type EvaluationResult = {
  value: FlagValue;
  explanation?: FlagExplanation;
  didFallbackToDefaultValue: boolean;
};

declare type ExposureEvent = {
  action: string;
  actionSubject: string;
  attributes: ExposureEventAttributes;
  source: string;
  tags?: string[];
  highPriority?: boolean;
};

declare type ExposureEventAttributes = ReservedAttributes & CustomAttributes;

export declare enum ExposureTriggerReason {
  OptIn = 'optInExposure',
  Manual = 'manualExposure',
  Default = 'defaultExposure',
  AutoExposure = 'autoExposure',
}

declare class FeatureFlagClient {
  flags: Map<String, FlagShape>;
  flagWrapperCache: Map<string, FlagWrapper>;
  trackedFlags: Set<string>;
  analyticsHandler?: AnalyticsHandler;
  automaticAnalyticsHandler?: AutomaticAnalyticsHandler;
  isAutomaticExposuresEnabled: boolean;
  automaticExposuresCache: Set<string>;
  constructor(options: {
    flags?: Flags_2;
    analyticsHandler: (event: ExposureEvent) => void;
  });
  setFlags(flags: Flags_2): void;
  setAnalyticsHandler(analyticsHandler: AnalyticsHandler): void;
  setAutomaticAnalyticsHandler(
    automaticAnalyticsHandler: AutomaticAnalyticsHandler,
  ): void;
  setIsAutomaticExposuresEnabled(isEnabled: boolean): void;
  setAutomaticExposuresMode(
    enableAutomaticExposures: boolean,
    automaticAnalyticsHandler: AutomaticAnalyticsHandler,
  ): void;
  /**
   * @todo Remove this method in a future major release.
   * This method should not have been exposed publically, but unfortunately is still used in some products.
   * We have created the getRawValue method already, which should solve the previous use-cases, but
   * have kept the method in order to get the changes rolled out.
   *
   * @deprecated Since 4.2.0. Will be deleted in version 5.0. Please use getRawValue instead.
   */
  getFlag(flagKey: string): BasicFlag | null;
  /**
   * This method returns the wrapper object for the given flag key.
   * If the flag does not exist, this will return a stubbed flag following the null-object pattern,
   * so it is always guaranteed to return an object.
   *
   * @todo In a future major release, we should look at removing getFlag from the public API, and merging
   * these two methods together. getFlag has been left returning null values for backwards compatibility.
   */
  private getFlagWrapper;
  clear(): void;
  getBooleanValue(
    flagKey: string,
    options: {
      default: boolean;
      shouldTrackExposureEvent?: boolean;
      exposureData?: CustomAttributes;
    },
  ): boolean;
  getVariantValue(
    flagKey: string,
    options: {
      default: string;
      oneOf: string[];
      shouldTrackExposureEvent?: boolean;
      exposureData?: CustomAttributes;
    },
  ): string;
  getJSONValue(flagKey: string): object;
  getRawValue(
    flagKey: string,
    options: {
      default: FlagValue;
      shouldTrackExposureEvent?: boolean;
      exposureData?: CustomAttributes;
    },
  ): FlagValue;
  /**
   * This method combines both the trackExposure and sendAutomaticExposure flows into
   * one endpoint. Depending on the passed in trigger reason a manual or automatic exposure
   * is sent.
   **/
  trackFeatureFlag(flagKey: string, options?: TrackFeatureFlagOptions): void;
  trackExposure(
    flagKey: string,
    flag: FlagShape,
    exposureData?: CustomAttributes,
  ): void;
  private _trackExposure;
  private sendAutomaticExposure;
  getFlagStats(): FlagStats;
}
export default FeatureFlagClient;

declare type FlagExplanation = {
  kind: Reason;
  ruleId?: RuleId;
  ruleIndex?: number;
  errorKind?: ErrorKind;
};

declare type Flags_2 = {
  [flagName: string]: FlagShape;
};

declare type FlagShape = {
  value: FlagValue;
  explanation?: FlagExplanation;
};

declare type FlagStats = {
  [flagKey: string]: {
    evaluationCount: number;
  };
};

declare type FlagValue = boolean | string | object;

declare interface FlagWrapper {
  evaluationCount: number;
  getBooleanValue(options: {
    default: boolean;
    shouldTrackExposureEvent?: boolean;
    exposureData?: CustomAttributes;
  }): boolean;
  getVariantValue(options: {
    default: string;
    oneOf: string[];
    shouldTrackExposureEvent?: boolean;
    exposureData?: CustomAttributes;
  }): string;
  getJSONValue(): object;
  getRawValue(options: {
    default: FlagValue;
    shouldTrackExposureEvent?: boolean;
    exposureData?: CustomAttributes;
  }): FlagValue;
}

declare type InternalTriggeredExposureHandler = (
  flagKey: string,
  flag: FlagShape,
  exposureTriggerReason: ExposureTriggerReason,
  exposureData?: CustomAttributes,
) => void;

declare type Reason =
  | 'OFF'
  | 'FALLTHROUGH'
  | 'RULE_MATCH'
  | 'TARGET_MATCH'
  | 'INELIGIBLE'
  | 'SIMPLE_EVAL'
  | 'ERROR';

declare type ReservedAttributes = {
  flagKey: string;
  reason: Reason;
  ruleId?: string;
  value: unknown;
  errorKind?: ErrorKind;
};

declare type RuleId = string;

declare type TrackFeatureFlagOptions = {
  triggerReason?: ExposureTriggerReason;
  value?: string | boolean | object;
  explanation?: FlagExplanation | undefined;
};

export {};
```
